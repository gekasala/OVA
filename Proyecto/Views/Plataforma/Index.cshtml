@using Proyecto.Models;
@using Proyecto.Funciones;
@{Usuario us = (Usuario)Session["Usuario"];}
@model plataforma
@{
    ViewBag.Title = "Plataforma";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .visor {
        width: 100%;
        /*min-height: 500px;*/
    }

    .textright {
        text-align: right;
    }

    img {
        width: 100px;
        height: 100px;
    }
</style>
<hr />
@if (@Model != null)
{
    if (@Model.tipoRecurso == null)
    {
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                @if (@Model.nombreTema != null)
                {
                    <h1><b>@Model.nombreTema</b></h1>
                }
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <img class="visor img-thumbnail" src="~/Archivos/fondo.jpg" />
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <p>@Model.descripcionTema</p>
            </div>
        </div>
    }
    else if (Model.tipoRecurso == "URL")
    {
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <h1><b>@Model.nombreUnidad</b></h1>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <iframe class="visor img-thumbnail" src="@Model.url" frameborder="0"></iframe>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <h2>@Model.nombreRecurso</h2><br />
                <p>@Model.descripcionRecurso</p>
                @if (@Model.evidencia)
                {
                    <div>@Model.descEvidencia</div>
                    <div>@Model.puntosRecurso</div>
                }
            </div>
        </div>
    }
    else if (Model.tipoRecurso == "ARCHIVO")
    {
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <h1><b>@Model.nombreUnidad</b></h1>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <object class="visor" data="~/Archivos/@Model.archivo" type="application/pdf"></object>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <h2>@Model.nombreRecurso</h2><br />
                <p>@Model.descripcionRecurso</p>
                @if (@Model.evidencia)
                {
                    <div>@Model.descEvidencia</div>
                    <div>@Model.puntosRecurso</div>
                }
            </div>
        </div>
    }
    else if (Model.tipoRecurso == "IMAGEN")
    {
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <h1><b>@Model.nombreUnidad</b></h1>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <img class="visor img-thumbnail" src="~/Archivos/@Model.imagen" />
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                <h2>@Model.nombreRecurso</h2><br />
                <p>@Model.descripcionRecurso</p>
                @if (@Model.evidencia)
                {
                    <div>@Model.descEvidencia</div>
                    <div>@Model.puntosRecurso</div>
                    @if (@Model.evidenciaM != null)
                    {
                        using (Html.BeginForm("AgregarRecurso", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
                        {
                            <div class="row">
                                <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6"><h3><b>Enviar evidencia</b></h3></div>
                                <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6 textright"><h4>@Model.puntosRecurso Puntos / @Model.evidenciaM.puntosAlcanzados Puntos</h4></div>
                            </div>
                            <hr />
                            <div class="row">
                                <div class=""><p>@Model.descEvidencia</p></div>
                            </div>
                            @Html.Hidden("idEvidencia", @Model.evidenciaM.idEvidencia, new { @value_data = "idEvidencia" })
                            @Html.Hidden("idTema", @Model.evidenciaM.idTema, new { @value_data = "idTema" })
                            @Html.Hidden("idUnidad", @Model.evidenciaM.idUnidad, new { @value_data = "idUnidad" })
                            @Html.Hidden("idRecurso", @Model.evidenciaM.idRecurso, new { @value_data = "idRecurso" })
                            @Html.Hidden("archivo", @Model.evidenciaM.archivo, new { @value_data = "archivo" })
                            @Html.Hidden("entregado", @Model.evidenciaM.entregado, new { @value_data = "entregado" })
                            @Html.Hidden("userName", us.userName, new { @value_data = "userName" })
                            <div class="row">
                                <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="form-group">
                                        <label>
                                            Archivo
                                        </label>
                                        @Html.TextBox("fileArchivo", @Model.evidenciaM.archivo, new { @type = "file", @Class = "custom-file-input", @placeholder = "", @Id = "txtarchivo", @title = "se admiten solo PDF", @value_data = "archivo", accept = "application/pdf" })
                                    </div>
                                </div>
                                @*<div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6">
                            <img class="img-thumbnail" src="~/Archivos/@Model.evidenciaM.archivo" width="100px"/>
                            <iframe class="img-thumbnail" src="~/Archivos/@Model.evidenciaM.archivo" frameborder="0" width="100px"></iframe>
                        </div>*@
                                @if (@Model.evidenciaM.entregado)
                                {
                                    <div class="form-group">
                                        <label>
                                            Comentario: @Model.evidenciaM.observacion
                                        </label>
                                    </div>
                                }
                                else
                                {
                                    <div class="form-group">
                                        <label>
                                            Comentario
                                        </label>
                                        @Html.TextArea("observacion", @Model.evidenciaM.observacion, new { @Class = "form-control", @placeholder = "", @Id = "txtobservacion", @value_data = "observacion" })
                                    </div>
                                }

                                @*@if()*@
                                <div class="form-group">
                                    <label>
                                        Observación: @Model.evidenciaM.retroalimentacion
                                    </label>
                                    @*@Html.TextArea("retroalimentacion", @Model.evidenciaM.retroalimentacion, new { @Class = "form-control", @placeholder = "", @Id = "txtretroalimentacion", @value_data = "retroalimentacion" })*@
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="row">
                            <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6"><h3><b>Enviar evidencia</b></h3></div>
                            <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6 textright"><h4>@Model.puntosRecurso Puntos / @Model.evidenciaM.puntosAlcanzados Puntos</h4></div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class=""><p>@Model.descEvidencia</p></div>
                        </div>
                        <div class="row">
                            <div class="cont col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                <div class="form-group">
                                    <label>
                                        Archivo
                                    </label>
                                    @Html.TextBox("fileArchivo", @Model.evidenciaM.archivo, new { @type = "file", @Class = "custom-file-input", @placeholder = "", @Id = "txtarchivo", @title = "se admiten solo PDF", @value_data = "archivo", accept = "application/pdf" })
                                </div>
                            </div>
                            <div class="form-group">
                                <label>
                                    Comentario: @Model.evidenciaM.observacion
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    Observación: @Model.evidenciaM.retroalimentacion
                                </label>
                            </div>
                        </div>
                    }

                }
            </div>
        </div>
    }
    <hr />
    <br />
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <table class="tabla table table-bordered">
                @if (Model.unidades != null && Model.unidades.Count > 0)
                {
                    foreach (Unidades un in Model.unidades)
                    {
                        <tr>
                            <th width="20%"><h2>@un.nombre</h2></th>
                            <th width="80%">
                                @if (Model.recursos != null && Model.recursos.Count > 0)
                                {
                                    foreach (Recursos re in Model.recursos)
                                    {
                                        if (re.idUnidad == un.idUnidad)
                                        {

                                            if (@re.url != null)
                                            {
                                                <a id="recurso" href="@Url.Action("recurso", "Plataforma", new { recurso = @re.idRecurso })" title="@re.nombre"><img src="~/Archivos/video.png" /></a>
                                            }
                                            else if (@re.archivo != null)
                                            {
                                                <a id="recurso" href="@Url.Action("recurso", "Plataforma", new { recurso = @re.idRecurso })" title="@re.nombre"><img src="~/Archivos/archivo.png" /></a>
                                            }
                                            else
                                            {
                                                <a id="recurso" href="@Url.Action("recurso", "Plataforma", new { recurso = @re.idRecurso })" title="@re.nombre"><img src="~/Archivos/imagen.png" /></a>
                                            }
                                        }
                                    }
                                }
                            </th>
                        </tr>
                    }
                }
            </table>
        </div>
    </div>
}



